# Hajime CMS

PHPとMySQLで構築されたシンプルなコンテンツ管理システムです。

## 特徴

- シンプルで直感的な管理画面
- ページ管理機能
- カスタマイズ可能なテンプレート（デフォルト・モダン）
- SEO対応のメタタグ設定
- レスポンシブデザイン
- ユーザー認証システム

## 必要な環境

- PHP 7.4以上
- MySQL 5.7以上 / MariaDB 10.2以上
- Apache（mod_rewriteが有効）

## インストール手順

### 1. ファイルの配置

プロジェクトをWebサーバーのドキュメントルートに配置します。

```bash
# 例: XAMPPの場合
D:\xampp\htdocs\hajime
```

### 2. データベースのセットアップ

MySQLにログインして、setup.sqlを実行します。

```bash
mysql -u root -p < setup.sql
```

または、phpMyAdminを使用して setup.sql をインポートします。

### 3. 設定ファイルの編集

`includes/config.php` を開き、データベース接続情報を確認・編集します。

```php
define('DB_HOST', 'localhost');
define('DB_NAME', 'hajime_db');
define('DB_USER', 'root');
define('DB_PASS', '');
```

サイトURLも環境に合わせて変更してください。

```php
define('SITE_URL', 'http://localhost/hajime');
```

### 4. ディレクトリの権限設定

アップロードディレクトリに書き込み権限を付与します。

```bash
chmod 755 uploads/
```

### 5. 管理画面へアクセス

ブラウザで以下のURLにアクセスします。

```
http://localhost/hajime/admin/
```

デフォルトのログイン情報:
- ユーザー名: `admin`
- パスワード: `admin`

## ディレクトリ構成

```
hajime/
├── admin/              # 管理画面
│   ├── index.php       # ダッシュボード
│   ├── login.php       # ログイン
│   ├── logout.php      # ログアウト
│   ├── page-edit.php   # ページ編集
│   └── page-delete.php # ページ削除
├── includes/           # PHPクラス・設定
│   ├── config.php      # 設定ファイル
│   ├── Database.php    # データベースクラス
│   ├── Page.php        # ページモデル
│   └── Auth.php        # 認証クラス
├── templates/          # テンプレート
│   ├── default/        # デフォルトテンプレート
│   │   └── index.php
│   └── modern/         # モダンテンプレート
│       └── index.php
├── uploads/            # アップロードファイル
├── assets/             # CSS/JS/画像
├── index.php           # フロントエンドエントリーポイント
├── .htaccess           # Apache設定
├── setup.sql           # データベースセットアップ
└── README.md           # このファイル
```

## 使い方

### ページの作成

1. 管理画面にログイン
2. 「新規ページ作成」をクリック
3. タイトル、コンテンツを入力
4. テンプレートとステータスを選択
5. 「作成」をクリック

### ページの編集

1. ダッシュボードでページ一覧を表示
2. 編集したいページの「編集」をクリック
3. 内容を変更
4. 「更新」をクリック

### テンプレートの切り替え

ページ編集画面で「テンプレート」を選択できます。

- **デフォルト**: シンプルなデザイン
- **モダン**: グラデーションを使用した現代的なデザイン

### SEO設定

各ページで以下を設定できます:

- メタタイトル
- メタディスクリプション

### URL構造

```
http://localhost/hajime/         # ホームページ
http://localhost/hajime/?page=about  # スラッグで指定
http://localhost/hajime/admin/   # 管理画面
```

## カスタマイズ

### 新しいテンプレートの追加

1. `templates/` に新しいディレクトリを作成
2. `index.php` を作成
3. ページ編集画面のテンプレート選択に追加

### スタイルのカスタマイズ

各テンプレートの `index.php` 内でTailwind CSSクラスやカスタムCSSを編集できます。

## セキュリティ

- パスワードは bcrypt でハッシュ化されています
- セッションタイムアウトは1時間に設定されています
- 管理画面は認証が必要です
- 本番環境では以下を実施してください:
  - デフォルトパスワードの変更
  - PHPエラー表示をOFFに
  - HTTPSの使用
  - ファイアウォールの設定

## トラブルシューティング

### ページが表示されない

- `.htaccess` が正しく配置されているか確認
- Apacheの `mod_rewrite` が有効か確認
- `includes/config.php` のSITE_URLが正しいか確認

### 管理画面にログインできない

- データベース接続情報が正しいか確認
- `setup.sql` が正しく実行されたか確認

### アップロードができない

- `uploads/` ディレクトリの権限を確認
- PHP設定のファイルサイズ制限を確認

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## サポート

問題が発生した場合は、以下を確認してください:

1. PHPのエラーログ
2. Apacheのエラーログ
3. ブラウザの開発者コンソール

## 今後の拡張案

- 画像アップロード機能
- カテゴリー・タグ機能
- コメント機能
- 検索機能
- メディアライブラリ
- ユーザー権限管理
- バックアップ機能
